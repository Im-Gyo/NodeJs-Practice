<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>게시판 목록</title>   
    
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
	<link href="/css/custom.css" rel="stylesheet">

  </head>
  <body>

    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<h3>
				글 목록
			</h3>
		<form method="GET" action="/search">
			<ul class="mainSearch">
				<li>
					<select name="category">
						<option value="title" name ="title">제목</option>						
						<option value="author" name ="author">작성자</option>
					</select>
				</li>
				<li>
					<input type="text" name="searchText">
				</li>
				<button type="submit" class="btn btn-secondary">
					검색
					<!-- <a href="#" class="btn btn-secondary" type="button">검색</a> -->
				</button>
			</ul>
		</form>

			<table class="table">
				<thead>
					<tr>
						<th>
							번호
						</th>
						<th>
							제목
						</th>
						<th>
							작성자
						</th>
						<th>
							날짜
						</th>
					</tr>
				</thead>
				<tbody>										
					<% data.forEach(function(post,index) { %>
					<tr>
						<td>
							<%= post.id %>
						</td>
						<td>
							<a href='/detail/<%= post.id%>'><%= post.title %></a>
						</td>
						<td>
							<%= post.author %>
						</td>
						<td>
							<%= post.created %>
						</td>
					</tr>
					<% }) %>				
				</tbody>
			</table>
			<div>
				<ul class="pagination">
					<%
						var nowSet = pasing.nowSet
						var page_size = pasing.page_size
						var page_list_size = page_list_size
						var nowPage = pasing.nowPage
						var totalPage = pasing.totalPage
						var totalSet = pasing.totalSet
						var startPage = pasing.startPage
						var lastPage = pasing.lastPage
					%>

					<% if(nowSet > 1) { %>
						<li class="page-item">
							<a class="page-link" href="/pasing/<%=(startPage - 1)%>">이전페이지</a>
						</li>
					<% } %>

					<%for(var i = startPage; i <= lastPage; i++) { 
						if(i > totalPage) { 
							break;
						}						
						
						if(i == nowPage) {
						%>
						<li class="page-item">
							<a class="page-link" href="/pasing/<%= i %>"><%= i %></a>
						</li>
					 <% } else {  %>

						<li class="page-item">
							<a class="page-link" href="/pasing/<%= i %>"><%= i %></a>
						</li>
						<% } %>
					<% } %>

					<%if(nowSet < totalSet) { %>
					<li class="page-item">
						<a class="page-link" href="/pasing/<%= lastPage + 1 %>">다음페이지</a>
					</li>
					<% } %>

				</ul>
			</div> <a href="/boardWrite" class="btn btn-secondary buttonCenter" type="button">글작성</a>
			<div> <a href="/chat" class="btn btn-secondary buttonCenter2" type="button">채팅방입장</a></div>
		</div>
	</div>
</div>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/scripts.js"></script>
  </body>
</html>